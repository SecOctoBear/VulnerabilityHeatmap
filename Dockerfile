# TODO: https://edu.chainguard.dev/chainguard/chainguard-images/getting-started/getting-started-node/

FROM cgr.dev/chainguard/node

ENV NODE_ENV=production
WORKDIR /app

COPY --chown=node:node ["index.html", "package.json", "package-lock.json", "./"]
COPY --chown=node:node ["frontend/*", "./frontend/"]
COPY --chown=node:node ["backend/", "./backend/"]
COPY --chown=node:node ["backend/adapters", "./backend/adapters"]

RUN npm install --omit-dev

CMD [ "backend/server.js" ]
