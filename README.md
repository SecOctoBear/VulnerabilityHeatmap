# Vulnerability Heatmap

Simple heatmap visualization of Threadfix vulnerability data inside a web page, using the apexcharts library. Will support more vulnerability management systems like defect dojo soon.

## Demo

See here: [https://secureio-gmbh.github.io/VulnerabilityHeatmap/](https://secureio-gmbh.github.io/VulnerabilityHeatmap/)

## Development

Create a file called `backend/config.js` with the following content:

```
exports.THREADFIX_APIKEY = '$THREADFIX_APIKEY'
exports.THREADFIX_BASEURL = '$THREADFIX_BASEURL'
```

Get the values of `$THREADFIX_APIKEY` and `$THREADFIX_BASEURL` from your running Threadfix installation.

Then start the node.js server and serve the index.html file:

```
# Start the node.js server on port 9876
$ npm install
$ npm run watchBackend
$ open http://localhost:9876/
```

## Install via Docker
```
$ docker build -t heatmap .
$ docker run -p 9876:9876 -d heatmap

# get a shell inside
$ docker run -it --entrypoint /bin/sh heatmap
```

## Deploy to GitHub pages
```
npm run deploy
```

## Architecture

A simple node.js service will fetch the data for all applications via Threadfix API and implements a simple JSON file based caching logic. When a browser fetches the html, a GET request is sent to the node.js service to get the JSON data. A little bit of JavaScript will then prepare the data for rendering the heatmap using the "apexcharts" library.

![Simple architecture](./arch.png)
